<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>éŸ³é¢‘æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a2e;
            color: #fff;
            padding: 40px;
        }
        h1 { color: #00d4ff; }
        .btn {
            background: #00d4ff;
            color: #000;
            border: none;
            padding: 15px 30px;
            margin: 10px;
            cursor: pointer;
            border-radius: 8px;
            font-size: 16px;
        }
        .btn:hover { background: #00a8cc; }
        .status {
            margin-top: 20px;
            padding: 20px;
            background: #2a2a4e;
            border-radius: 8px;
        }
        .success { color: #00ff88; }
        .error { color: #ff4444; }
    </style>
</head>
<body>
    <h1>ğŸ”Š éŸ³é¢‘æ’­æ”¾æµ‹è¯•</h1>
    <p>ç‚¹å‡»æŒ‰é’®æµ‹è¯•éŸ³é¢‘æ’­æ”¾ï¼š</p>

    <div>
        <button class="btn" onclick="testAudio('notification')">é€šçŸ¥éŸ³</button>
        <button class="btn" onclick="testAudio('permission_request')">æƒé™è¯·æ±‚</button>
        <button class="btn" onclick="testAudio('stop')">å“åº”å®Œæˆ</button>
        <button class="btn" onclick="testAudio('user_prompt_submit')">ç”¨æˆ·è¾“å…¥</button>
        <button class="btn" onclick="testAudio('pre_tool_use')">å·¥å…·è°ƒç”¨å‰</button>
        <button class="btn" onclick="testAudio('post_tool_use')">å·¥å…·è°ƒç”¨å</button>
    </div>

    <div class="status" id="status">ç­‰å¾…æµ‹è¯•...</div>

    <script>
        function testAudio(name) {
            const status = document.getElementById('status');
            const audioPath = `/static/audio/${name}.wav`;
            status.innerHTML = `æ­£åœ¨åŠ è½½: ${audioPath}...`;

            const audio = new Audio(audioPath);
            audio.volume = 0.8;

            audio.oncanplaythrough = () => {
                status.innerHTML = `<span class="success">âœ… éŸ³é¢‘åŠ è½½æˆåŠŸ: ${audioPath}</span>`;
            };

            audio.onplay = () => {
                status.innerHTML += `<br><span class="success">â–¶ï¸ æ­£åœ¨æ’­æ”¾...</span>`;
            };

            audio.onended = () => {
                status.innerHTML += `<br><span class="success">âœ… æ’­æ”¾å®Œæˆ!</span>`;
            };

            audio.onerror = (e) => {
                status.innerHTML = `<span class="error">âŒ éŸ³é¢‘åŠ è½½å¤±è´¥: ${audioPath}</span>`;
                status.innerHTML += `<br>é”™è¯¯: ${audio.error ? audio.error.message : 'æœªçŸ¥é”™è¯¯'}`;
                console.error('Audio error:', e, audio.error);
            };

            audio.play().then(() => {
                console.log('æ’­æ”¾æˆåŠŸ');
            }).catch(err => {
                status.innerHTML += `<br><span class="error">âŒ æ’­æ”¾å¤±è´¥: ${err.message}</span>`;
                console.error('Play error:', err);
            });
        }
    </script>
</body>
</html>
